# 第一阶段：项目初始化和基础搭建

## 任务目标

完成 Dropit 项目的基础环境搭建，包括项目创建、依赖安装、基础结构配置和开发环境准备。

## 任务拆解

### 任务1.1：项目初始化和依赖安装

#### 提示词

```
请帮我创建一个基于 Next.js 14 的 TypeScript 项目，项目名称为 "dropit"。
要求：
1. 使用 App Router 架构
2. 集成 Tailwind CSS
3. 配置 ESLint 和 Prettier
4. 安装以下核心依赖：
   - swr (数据获取和缓存)
   - zustand (状态管理)
   - react-hook-form (表单处理)
   - @vercel/kv (Vercel KV 存储)
   - @vercel/blob (Vercel Blob 存储)
   - jsonwebtoken (JWT 认证)
   - bcryptjs (密码加密)
5. 安装开发依赖：
   - @types/jsonwebtoken
   - @types/bcryptjs
   - jest
   - @testing-library/react
   - @testing-library/jest-dom
   - msw (Mock Service Worker)
```

#### 测试方法

1. **项目创建验证**：
   - 检查 `package.json` 文件是否正确创建
   - 验证所有依赖是否正确安装
   - 确认 TypeScript 配置是否正确

2. **开发环境验证**：
   - 运行 `npm run dev` 启动开发服务器
   - 访问 `http://localhost:3000` 确认页面正常显示
   - 检查控制台是否有错误信息

3. **构建测试**：
   - 运行 `npm run build` 确认项目能正常构建
   - 检查构建输出目录是否正确生成

### 任务1.2：项目结构创建

#### 提示词

```
请帮我创建 Dropit 项目的完整目录结构，包括：
1. 在 app 目录下创建以下结构：
   - api/auth/route.ts (认证API)
   - api/content/route.ts (内容管理API)
   - api/upload/route.ts (文件上传API)
   - globals.css (全局样式)
   - layout.tsx (根布局)
   - page.tsx (主页面)

2. 创建以下目录和文件：
   - components/ui/ (基础UI组件目录)
   - components/AuthForm.tsx (认证表单组件)
   - components/Clipboard.tsx (剪贴板组件)
   - components/ImageUpload.tsx (图片上传组件)
   - lib/auth.ts (认证相关工具函数)
   - lib/storage.ts (存储操作工具函数)
   - lib/utils.ts (通用工具函数)
   - types/index.ts (TypeScript 类型定义)
   - __tests__/ (测试文件目录)

3. 配置 TypeScript 类型检查
4. 设置 Tailwind CSS 配置
```

#### 测试方法

1. **目录结构验证**：
   - 检查所有目录和文件是否正确创建
   - 确认文件路径和命名规范

2. **TypeScript 编译测试**：
   - 运行 `npx tsc --noEmit` 检查类型错误
   - 确认所有 TypeScript 文件能正常编译

3. **样式配置测试**：
   - 检查 Tailwind CSS 是否正确配置
   - 在组件中使用 Tailwind 类名确认样式生效

### 任务1.3：环境配置和部署准备

#### 提示词

```
请帮我配置 Dropit 项目的环境变量和部署配置：
1. 创建 .env.local 文件模板，包含：
   - APP_PASSWORD (应用访问密码)
   - JWT_SECRET (JWT 密钥)
   - VERCEL_KV_REST_API_URL (Vercel KV 连接URL)
   - VERCEL_KV_REST_API_TOKEN (Vercel KV 访问令牌)
   - VERCEL_BLOB_READ_WRITE_TOKEN (Vercel Blob 访问令牌)

2. 配置 Next.js 配置文件，优化 Serverless 部署：
   - 设置输出模式为 standalone
   - 配置图片优化
   - 设置安全头

3. 创建 Vercel 部署配置文件：
   - vercel.json 配置文件
   - 环境变量配置说明

4. 配置 GitHub Actions 工作流：
   - 自动测试工作流
   - 自动部署工作流
```

#### 测试方法

1. **环境变量测试**：
   - 检查 .env.local 文件是否正确创建
   - 验证环境变量在代码中能正确读取

2. **配置验证**：
   - 运行 `npm run build` 确认配置生效
   - 检查构建输出是否符合预期

3. **部署配置测试**：
   - 验证 vercel.json 配置是否正确
   - 检查 GitHub Actions 工作流配置

## 完成标准

1. ✅ 项目能正常启动和构建
2. ✅ 所有依赖正确安装
3. ✅ 项目结构完整创建
4. ✅ TypeScript 配置正确
5. ✅ 环境变量配置完成
6. ✅ 部署配置准备就绪

## 下一步

完成基础搭建后，进入第二阶段：核心功能实现，包括认证系统、文本同步、图片上传等功能的开发。
